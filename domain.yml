
version: "2.0"

intents:
  - nlu_fallback
  - get_started
  - choose_theme
  - choose_sub_theme
  - choose_directory
  - choose_sub_directory
  - choose_card
  - satisfaction_affirm
  - satisfaction_deny
  - other_question
  - no_other_question
  - ask_agent
  - no_ask_agent

slots:
  theme:
    type: text
    influence_conversation: false
  sub_theme:
    type: text
    influence_conversation: true
  directory:
    type: text
    influence_conversation: true
  sub_directory:
    type: text
    influence_conversation: false
  card:
    type: text
    influence_conversation: false
  ask_piaf_1:
    type: bool
    initial_value: false
    influence_conversation: false
  ask_piaf_1_ok:
    type: bool
    initial_value: false
    influence_conversation: true
  ask_piaf_1_finish:
    type: bool
    initial_value: false
    influence_conversation: true
  ask_piaf_2:
    type: bool
    initial_value: false
    influence_conversation: true
  ask_piaf_2_ok:
    type: bool
    initial_value: false
    influence_conversation: true

responses:
  utter_get_started:
    - text: "Bonjour, je suis le prototype de chatbot de service-public.fr. Toutes mes réponses sont automatisées, j'apprends actuellement à trouver la meilleure réponse à votre question."
  utter_ask_question:
    - text: "Vous pouvez à présent poser votre question :"
  utter_rephrase_piaf_1:
    - text: "Je n'ai pas rouvé, pouvez-vous m'aider en choisissant un sous-thème ou en reformulant la question."
  utter_rephrase_piaf_2:
    - text: "Réessayer en rephrasant la question et en posant une question d'une vingtaine de mots maximum."
  utter_rephrase_piaf_3:
    - text: "Hmm je n'ai toujours pas trouvé ... nous allons chercher la fiche ensemble."
  utter_send_card:
    - text: "Vous trouverez tout le détail ici :"
      buttons:
        - title: "{title}"
          payload: "{payload}"
  utter_satisfaction:
    - text: "Ai-je répondu à votre question ?"
      buttons:
        - title: "Oui"
          payload: "/satisfaction_affirm"
        - title: "Non"
          payload: "/satisfaction_deny"
  utter_other_question:
    - text: "Avez-vous une autre question ?"
      buttons:
        - title: "Oui"
          payload: "/other_question"
        - title: "Non"
          payload: "/no_other_question"
  utter_goodbye_service_public:
    - text: "A bientôt sur service-public.fr !"
  utter_ask_agent:
    - text: "Souhaitez-vous que j'envoie votre demande à un agent ?"
      buttons:
        - title: "Oui"
          payload: "/ask_agent"
        - title: "Non"
          payload: "/no_ask_agent"


actions:
  - action_ask_piaf
  - action_send_themes
  - action_send_sub_themes
  - action_send_directories
  - action_send_sub_directories
  - action_send_cards

session_config:
  session_expiration_time: 60  # value in minutes
  carry_over_slots_to_new_session: true
